[gd_scene load_steps=18 format=3 uid="uid://johbf16mwra8"]

[ext_resource type="Script" path="res://SceneConfig.cs" id="1_0dxlu"]
[ext_resource type="PackedScene" uid="uid://dwboa5m4bpu0l" path="res://Gameplay Modes/Explore.tscn" id="2_liug8"]
[ext_resource type="PackedScene" uid="uid://bjan84vglc716" path="res://Gameplay Modes/NightDefense.tscn" id="2_pjbcb"]
[ext_resource type="Resource" uid="uid://c6innrm4p7fpn" path="res://Night Defense/NightAttacks/NightOne.tres" id="3_xtw4k"]
[ext_resource type="PackedScene" uid="uid://cenpkmy5h0ooq" path="res://Explore Mode/explore_player.tscn" id="4_gvjqb"]
[ext_resource type="Resource" uid="uid://doooy2cygnv6i" path="res://Night Defense/NightAttacks/NightTwo.tres" id="4_j3x6o"]
[ext_resource type="Resource" uid="uid://c321sur8pr4i" path="res://Night Defense/NightAttacks/NightThree.tres" id="5_lwwdg"]
[ext_resource type="PackedScene" uid="uid://f1owetw5mn3p" path="res://Tutorial/TutorialTrigger.tscn" id="11_b2hkx"]
[ext_resource type="Script" path="res://Night Defense/ResultsScreen.cs" id="13_yr3hr"]
[ext_resource type="Environment" uid="uid://cqpc6quc73qwr" path="res://Night Defense/Result Screen Environment.tres" id="14_c660d"]
[ext_resource type="Theme" uid="uid://dp5ux27rntx3l" path="res://Night Defense/Results Screen Theme.tres" id="15_q3tlf"]

[sub_resource type="StyleBoxEmpty" id="StyleBoxEmpty_n30o4"]

[sub_resource type="StyleBoxFlat" id="StyleBoxFlat_lld5j"]
bg_color = Color(0, 0, 0, 0)

[sub_resource type="StyleBoxEmpty" id="StyleBoxEmpty_yetgj"]

[sub_resource type="Animation" id="Animation_xiira"]
resource_name = "GameOver"
length = 6.0
tracks/0/type = "bezier"
tracks/0/imported = false
tracks/0/enabled = true
tracks/0/path = NodePath("GameOverScreen:theme_override_styles/panel:bg_color:r")
tracks/0/interp = 1
tracks/0/loop_wrap = true
tracks/0/keys = {
"handle_modes": PackedInt32Array(0, 0),
"points": PackedFloat32Array(0, -0.25, 0, 0.25, 0, 0, -0.25, 0, 0.25, 0),
"times": PackedFloat32Array(2, 6)
}
tracks/1/type = "bezier"
tracks/1/imported = false
tracks/1/enabled = true
tracks/1/path = NodePath("GameOverScreen:theme_override_styles/panel:bg_color:g")
tracks/1/interp = 1
tracks/1/loop_wrap = true
tracks/1/keys = {
"handle_modes": PackedInt32Array(0, 0),
"points": PackedFloat32Array(0, -0.25, 0, 0.25, 0, 0, -0.25, 0, 0.25, 0),
"times": PackedFloat32Array(2, 6)
}
tracks/2/type = "bezier"
tracks/2/imported = false
tracks/2/enabled = true
tracks/2/path = NodePath("GameOverScreen:theme_override_styles/panel:bg_color:b")
tracks/2/interp = 1
tracks/2/loop_wrap = true
tracks/2/keys = {
"handle_modes": PackedInt32Array(0, 0),
"points": PackedFloat32Array(0, -0.25, 0, 0.25, 0, 0, -0.25, 0, 0.25, 0),
"times": PackedFloat32Array(2, 6)
}
tracks/3/type = "bezier"
tracks/3/imported = false
tracks/3/enabled = true
tracks/3/path = NodePath("GameOverScreen:theme_override_styles/panel:bg_color:a")
tracks/3/interp = 1
tracks/3/loop_wrap = true
tracks/3/keys = {
"handle_modes": PackedInt32Array(0, 0),
"points": PackedFloat32Array(0, -0.25, 0, 0.25, 0, 1, -0.25, 0, 0.25, 0),
"times": PackedFloat32Array(2, 6)
}
tracks/4/type = "bezier"
tracks/4/imported = false
tracks/4/enabled = true
tracks/4/path = NodePath("GameOverScreen/Label:theme_override_colors/font_color:r")
tracks/4/interp = 1
tracks/4/loop_wrap = true
tracks/4/keys = {
"handle_modes": PackedInt32Array(0, 0),
"points": PackedFloat32Array(0.737255, -0.25, 0, 0.25, 0, 0.737255, -0.25, 0, 0.25, 0),
"times": PackedFloat32Array(2, 6)
}
tracks/5/type = "bezier"
tracks/5/imported = false
tracks/5/enabled = true
tracks/5/path = NodePath("GameOverScreen/Label:theme_override_colors/font_color:g")
tracks/5/interp = 1
tracks/5/loop_wrap = true
tracks/5/keys = {
"handle_modes": PackedInt32Array(0, 0),
"points": PackedFloat32Array(0, -0.25, 0, 0.25, 0, 0, -0.25, 0, 0.25, 0),
"times": PackedFloat32Array(2, 6)
}
tracks/6/type = "bezier"
tracks/6/imported = false
tracks/6/enabled = true
tracks/6/path = NodePath("GameOverScreen/Label:theme_override_colors/font_color:b")
tracks/6/interp = 1
tracks/6/loop_wrap = true
tracks/6/keys = {
"handle_modes": PackedInt32Array(0, 0),
"points": PackedFloat32Array(0, -0.25, 0, 0.25, 0, 0, -0.25, 0, 0.25, 0),
"times": PackedFloat32Array(2, 6)
}
tracks/7/type = "bezier"
tracks/7/imported = false
tracks/7/enabled = true
tracks/7/path = NodePath("GameOverScreen/Label:theme_override_colors/font_color:a")
tracks/7/interp = 1
tracks/7/loop_wrap = true
tracks/7/keys = {
"handle_modes": PackedInt32Array(0, 0),
"points": PackedFloat32Array(0, -0.25, 0, 0.25, 0, 1, -0.25, 0, 0.25, 0),
"times": PackedFloat32Array(2, 6)
}

[sub_resource type="Animation" id="Animation_r7vp5"]
length = 0.001
tracks/0/type = "bezier"
tracks/0/imported = false
tracks/0/enabled = true
tracks/0/path = NodePath("GameOverScreen:theme_override_styles/panel:bg_color:r")
tracks/0/interp = 1
tracks/0/loop_wrap = true
tracks/0/keys = {
"handle_modes": PackedInt32Array(0),
"points": PackedFloat32Array(0, -0.25, 0, 0.25, 0),
"times": PackedFloat32Array(0)
}
tracks/1/type = "bezier"
tracks/1/imported = false
tracks/1/enabled = true
tracks/1/path = NodePath("GameOverScreen:theme_override_styles/panel:bg_color:g")
tracks/1/interp = 1
tracks/1/loop_wrap = true
tracks/1/keys = {
"handle_modes": PackedInt32Array(0),
"points": PackedFloat32Array(0, -0.25, 0, 0.25, 0),
"times": PackedFloat32Array(0)
}
tracks/2/type = "bezier"
tracks/2/imported = false
tracks/2/enabled = true
tracks/2/path = NodePath("GameOverScreen:theme_override_styles/panel:bg_color:b")
tracks/2/interp = 1
tracks/2/loop_wrap = true
tracks/2/keys = {
"handle_modes": PackedInt32Array(0),
"points": PackedFloat32Array(0, -0.25, 0, 0.25, 0),
"times": PackedFloat32Array(0)
}
tracks/3/type = "bezier"
tracks/3/imported = false
tracks/3/enabled = true
tracks/3/path = NodePath("GameOverScreen:theme_override_styles/panel:bg_color:a")
tracks/3/interp = 1
tracks/3/loop_wrap = true
tracks/3/keys = {
"handle_modes": PackedInt32Array(0),
"points": PackedFloat32Array(0, -0.25, 0, 0.25, 0),
"times": PackedFloat32Array(0)
}
tracks/4/type = "bezier"
tracks/4/imported = false
tracks/4/enabled = true
tracks/4/path = NodePath("GameOverScreen/Label:theme_override_colors/font_color:r")
tracks/4/interp = 1
tracks/4/loop_wrap = true
tracks/4/keys = {
"handle_modes": PackedInt32Array(0),
"points": PackedFloat32Array(0.737255, -0.25, 0, 0.25, 0),
"times": PackedFloat32Array(0)
}
tracks/5/type = "bezier"
tracks/5/imported = false
tracks/5/enabled = true
tracks/5/path = NodePath("GameOverScreen/Label:theme_override_colors/font_color:g")
tracks/5/interp = 1
tracks/5/loop_wrap = true
tracks/5/keys = {
"handle_modes": PackedInt32Array(0),
"points": PackedFloat32Array(0, -0.25, 0, 0.25, 0),
"times": PackedFloat32Array(0)
}
tracks/6/type = "bezier"
tracks/6/imported = false
tracks/6/enabled = true
tracks/6/path = NodePath("GameOverScreen/Label:theme_override_colors/font_color:b")
tracks/6/interp = 1
tracks/6/loop_wrap = true
tracks/6/keys = {
"handle_modes": PackedInt32Array(0),
"points": PackedFloat32Array(0, -0.25, 0, 0.25, 0),
"times": PackedFloat32Array(0)
}
tracks/7/type = "bezier"
tracks/7/imported = false
tracks/7/enabled = true
tracks/7/path = NodePath("GameOverScreen/Label:theme_override_colors/font_color:a")
tracks/7/interp = 1
tracks/7/loop_wrap = true
tracks/7/keys = {
"handle_modes": PackedInt32Array(0),
"points": PackedFloat32Array(0, -0.25, 0, 0.25, 0),
"times": PackedFloat32Array(0)
}

[sub_resource type="AnimationLibrary" id="AnimationLibrary_i85e8"]
_data = {
"GameOver": SubResource("Animation_xiira"),
"RESET": SubResource("Animation_r7vp5")
}

[node name="SceneConfig" type="Node3D" node_paths=PackedStringArray("startingMode", "citySpawnPoint", "myNightDefenseMode")]
process_mode = 1
script = ExtResource("1_0dxlu")
startingMode = NodePath("ExploreMode")
citySpawnPoint = NodePath("CityMarker")
cityScene = true
myNightDefenseMode = NodePath("Night Defense")

[node name="Night Defense" parent="." node_paths=PackedStringArray("results", "playerNightStartPosition", "explorePlayer") instance=ExtResource("2_pjbcb")]
lightDurationInSeconds = 90
results = NodePath("../Results Screen")
playerNightStartPosition = NodePath("../Night Marker")
nights = Array[Resource]([ExtResource("3_xtw4k"), ExtResource("4_j3x6o"), ExtResource("5_lwwdg"), null])
explorePlayer = NodePath("../ExplorePlayer")

[node name="ExplorePlayer" parent="." instance=ExtResource("4_gvjqb")]
transform = Transform3D(1, 0, 1.06581e-14, 0, 1, 0, -1.06581e-14, 0, 1, -29, 0.212, 49)

[node name="Explore Camera" parent="ExplorePlayer" index="5"]
transform = Transform3D(1, 2.40465e-08, -5.62842e-08, -1.39075e-08, 0.984808, 0.173648, 5.96047e-08, -0.173648, 0.984808, 0, 6, 14)
current = false

[node name="Results Screen" type="Node3D" parent="." node_paths=PackedStringArray("resultsTextContainer", "nextDayMode")]
script = ExtResource("13_yr3hr")
resultsTextContainer = NodePath("GUI/Background Element/Results Text Container")
nextDayMode = NodePath("../ExploreMode")

[node name="Results Screen Camera" type="Camera3D" parent="Results Screen"]
transform = Transform3D(0.707107, -0.353553, 0.612372, 0, 0.866025, 0.5, -0.707107, -0.353553, 0.612372, 40, 90, 150)
environment = ExtResource("14_c660d")
v_offset = 8.815
projection = 1
current = true
size = 180.0

[node name="Result Screen Light" type="DirectionalLight3D" parent="Results Screen"]
transform = Transform3D(-0.64697, -0.310656, -0.696364, -0.571881, 0.801747, 0.173648, 0.504363, 0.510582, -0.696364, 0, 3.125, 0)
visible = false
light_color = Color(1, 0.666667, 0, 1)
light_energy = 2.0
shadow_enabled = true
sky_mode = 1

[node name="Result Screen Sky" type="DirectionalLight3D" parent="Results Screen"]
transform = Transform3D(-0.589997, -0.390529, -0.706676, -0.580349, 0.81362, 0.0348995, 0.561336, 0.430709, -0.706676, 0, 3.125, 0)
visible = false
light_color = Color(1, 0.666667, 0, 1)
light_energy = 2.0
shadow_enabled = true

[node name="GUI" type="Panel" parent="Results Screen"]
texture_filter = 1
anchors_preset = 15
anchor_right = 1.0
anchor_bottom = 1.0
grow_horizontal = 2
grow_vertical = 2
theme = ExtResource("15_q3tlf")
theme_override_styles/panel = SubResource("StyleBoxEmpty_n30o4")

[node name="GameOverScreen" type="Panel" parent="Results Screen/GUI"]
z_index = 1
layout_mode = 0
offset_right = 1926.0
offset_bottom = 1082.0
theme_override_styles/panel = SubResource("StyleBoxFlat_lld5j")

[node name="Label" type="Label" parent="Results Screen/GUI/GameOverScreen"]
layout_mode = 1
anchors_preset = 8
anchor_left = 0.5
anchor_top = 0.5
anchor_right = 0.5
anchor_bottom = 0.5
offset_left = -317.0
offset_top = -177.0
offset_right = 317.0
offset_bottom = 177.0
grow_horizontal = 2
grow_vertical = 2
theme_override_colors/font_color = Color(0.737255, 0, 0, 0)
theme_override_font_sizes/font_size = 64
text = "Game Over"
horizontal_alignment = 1
vertical_alignment = 1

[node name="Background Element" type="Panel" parent="Results Screen/GUI"]
layout_mode = 1
anchors_preset = -1
anchor_right = 0.265
anchor_bottom = 0.512
offset_right = -0.799988
offset_bottom = 0.039978

[node name="Results Text Container" type="VBoxContainer" parent="Results Screen/GUI/Background Element"]
layout_mode = 1
anchors_preset = -1
anchor_right = 1.0
anchor_bottom = 1.0
offset_left = 9.0
offset_top = 29.0
offset_right = -9.0
offset_bottom = -129.0

[node name="Title" type="Label" parent="Results Screen/GUI/Background Element/Results Text Container"]
layout_mode = 2
text = "Results - Night 1"
horizontal_alignment = 1

[node name="HSeparator" type="HSeparator" parent="Results Screen/GUI/Background Element/Results Text Container"]
layout_mode = 2

[node name="Enemy Counts" type="RichTextLabel" parent="Results Screen/GUI/Background Element/Results Text Container"]
layout_mode = 2
bbcode_enabled = true
text = "> Enemies Remaining : [ALL]
	>[WAN] Wandering
	[color=Red]>[RAD] Raider[/color]"
fit_content = true

[node name="HSeparator2" type="HSeparator" parent="Results Screen/GUI/Background Element/Results Text Container"]
layout_mode = 2
theme_override_constants/separation = 40
theme_override_styles/separator = SubResource("StyleBoxEmpty_yetgj")

[node name="Total Party Kill" type="RichTextLabel" parent="Results Screen/GUI/Background Element/Results Text Container"]
layout_mode = 2
theme_override_font_sizes/normal_font_size = 32
bbcode_enabled = true
text = "[color=DarkRed]-All Heroes Defeated!-[/color]"
fit_content = true

[node name="House Abandoned" type="RichTextLabel" parent="Results Screen/GUI/Background Element/Results Text Container"]
layout_mode = 2
bbcode_enabled = true
text = "[color=DarkRed][center] Another House was Abandoned!"
fit_content = true

[node name="HSeparator3" type="HSeparator" parent="Results Screen/GUI/Background Element/Results Text Container"]
layout_mode = 2
theme_override_constants/separation = 40
theme_override_styles/separator = SubResource("StyleBoxEmpty_yetgj")

[node name="Home Counts" type="RichTextLabel" parent="Results Screen/GUI/Background Element/Results Text Container"]
layout_mode = 2
bbcode_enabled = true
text = "> Homes Lost Tonight : [TN]

> Homes Lost Overall : [OV]

[color=Red] [US] Left Until City Surrenders[/color]"
fit_content = true

[node name="PressStart" type="Label" parent="Results Screen/GUI"]
layout_mode = 1
anchors_preset = -1
anchor_left = 0.5
anchor_top = 0.899
anchor_right = 1.0
anchor_bottom = 1.0
offset_left = 31.0
offset_top = 26.08
offset_right = -33.0
offset_bottom = -32.0
grow_horizontal = 2
grow_vertical = 2
theme_override_font_sizes/font_size = 48
text = "Press Start to Continue. . ."

[node name="AnimationPlayer" type="AnimationPlayer" parent="Results Screen/GUI"]
libraries = {
"": SubResource("AnimationLibrary_i85e8")
}

[node name="ExploreMode" parent="." node_paths=PackedStringArray("explorePlayer") instance=ExtResource("2_liug8")]
explorePlayer = NodePath("../ExplorePlayer")
CityExplore = true

[node name="Start Timer" type="Timer" parent="ExploreMode"]
wait_time = 0.2
one_shot = true
autostart = true

[node name="CityMarker" type="Marker3D" parent="."]

[node name="Night Marker" type="Marker3D" parent="."]
transform = Transform3D(1, 0, 0, 0, 1, 0, 0, 0, 1, -2.94695, 0, 55.9744)

[node name="Start Game Tutorial" parent="." instance=ExtResource("11_b2hkx")]
tutorialMessages = Array[String](["Welcome to The Chain of Time!", "Your Goal is to defend this city from the undead.", "You have some time each day to prepare for the attack each night!"])
tutorialTriggerName = &"Weclome Message"

[connection signal="animation_finished" from="Results Screen/GUI/AnimationPlayer" to="Results Screen" method="OnGameOverAnimationComplete"]
[connection signal="timeout" from="ExploreMode/Start Timer" to="Start Game Tutorial" method="Trigger"]

[editable path="ExplorePlayer"]
